@{
    ViewBag.Title = "SecondMission";
}
<!DOCTYPE html>
<html>
<head>
    <style>

        html
        body {
            background-image: url("/export-map-share.png");
            background-size: 100% 100%;
            background-position: center center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        var IntervalTime = @Session["time"] * 1000
        var htmlCanvas = document.getElementById("canvas");
        htmlCanvas.width = window.innerWidth;
        htmlCanvas.height = window.innerHeight;

        var context = htmlCanvas.getContext("2d");
        var oldLon = (@ViewBag.lon + 180) * (htmlCanvas.width / 360);
        var oldLat = (@ViewBag.lat + 90) * (htmlCanvas.height / 180);

        (function () {
            initialize();

            function initialize() {
                window.addEventListener('resize', resizeCanvas, false);
                resizeCanvas();
            }

            function resizeCanvas() {
                circle(oldLon, oldLat, context);
            }

        })();

        allCircle = [];

        myTimer = (function () {


/*
            function myFunction(xml) {
                var i;
                var xmlDoc = xml.responseXML;
                var table = "<tr><th>Artist</th><th>Title</th></tr>";
                var x = xmlDoc.getElementsByTagName("CD");
                for (i = 0; i < x.length; i++) {
                    table += "<tr><td>" +
                        x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
                        "</td><td>" +
                        x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
                        "</td></tr>";
                }
                document.getElementById("demo").innerHTML = table;
            }*/


            $.post("@Url.Action("createXmlData")").done(function (xml) {
                var xmlDoc = $.parseXML(xml);
                $xml = $(xmlDoc);
                Lon = ((parseFloat($xml.find("Lon").text())) + 180) * (htmlCanvas.width / 360);
                Lat = ((parseFloat($xml.find("Lat").text())) + 90) * (htmlCanvas.height / 180);
                var locationPair = { x: Lon, y: Lat };
                allCircle.push(locationPair);
                drawPath(oldLon, oldLat, allCircle, context);
            });

         });

        setInterval(myTimer, IntervalTime);
        myTimer();

    </script>
</body>
</html>